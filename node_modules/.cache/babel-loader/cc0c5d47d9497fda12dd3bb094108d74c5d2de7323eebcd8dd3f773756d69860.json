{"ast":null,"code":"var _jsxFileName = \"/Users/yaothao/Documents/Yellow Page Research/public-facing/prototype/src/SearchBar.js\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { useStateValue } from './StateProvider';\nimport Helpers from \"./Helpers\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction SearchBar() {\n  _s();\n  const [{\n    tagList\n  }] = useStateValue();\n  const inputValue = '';\n  const handleNewTag = tags => {\n    if (this.props.onNewTag) this.props.onNewTag(tags);\n    if (this.props.onTagChange) this.props.onTagChange(tags);\n  };\n  const handleInputChange = _ref => {\n    let {\n      target: {\n        value: inputValue\n      }\n    } = _ref;\n    inputValue = inputValue === ',' ? '' : inputValue;\n    this.setState({\n      inputValue\n    });\n  };\n  const handleKeyDown = e => {\n    let {\n      key,\n      target: {\n        value\n      }\n    } = e;\n    let {\n      tags\n    } = this.state;\n    switch (key) {\n      case 'Tab':\n        if (value) e.preventDefault();\n      case 'Enter':\n      case ',':\n        value = value.trim();\n        if (value && notDuplicate(tags, value)) {\n          addTag(value);\n        } else {\n          this.setState({\n            inputValue: ''\n          });\n        }\n        break;\n      case 'Backspace':\n        if (!value) {\n          handleTagDelete(tags.length - 1);\n        }\n        break;\n    }\n  };\n  const handleTagDelete = (index, e) => {\n    deleteTag(index, () => {\n      this.props.onTagChange(this.state.tags);\n    });\n  };\n  const deleteTag = (index, callback) => {\n    let tags = this.state.tags.slice();\n    tags.splice(index, 1);\n    this.setState({\n      tags\n    }, () => {\n      if (callback) callback();\n    });\n  };\n  const notDuplicate = (tags, newTag) => {\n    return !tags.includes(newTag) || this.props.allowDuplicates;\n  };\n  const addTag = tag => {\n    if (this.notDuplicate(this.state.tags, tag)) {\n      this.setState({\n        tags: [...this.state.tags, tag],\n        inputValue: ''\n      }, () => {\n        handleNewTag(this.state.tags);\n      });\n    }\n  };\n  const updateControlledTags = tags => {\n    if (tags && !Helpers.hasDuplicates(tags)) {\n      this.setState({\n        tags\n      }, () => {\n        // this.props.onTagChange(tags);\n      });\n    }\n  };\n  const componentWillReceiveProps = nextProps => {\n    updateControlledTags(nextProps.tags);\n  };\n  return /*#__PURE__*/_jsxDEV(\"span\", {\n    className: \"tagInputWrapper\",\n    children: [/*#__PURE__*/_jsxDEV(TagsList, {\n      tags: this.state.tags,\n      onTagDelete: this.handleTagDelete,\n      hashtag: this.props.hashtag\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      name: \"tagInput\",\n      className: \"tagInput\",\n      placeholder: \"enter a tag...\",\n      value: inputValue,\n      onChange: this.handleInputChange,\n      onKeyDown: this.handleKeyDown\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 9\n  }, this);\n}\n_s(SearchBar, \"WJx4VPo8FH6Ei+nKRdSN+e2T3To=\", false, function () {\n  return [useStateValue];\n});\n_c = SearchBar;\nconst TagsList = _ref2 => {\n  let {\n    tags,\n    onTagDelete,\n    hashtag\n  } = _ref2;\n  let list = tags.map((tag, index) => /*#__PURE__*/_jsxDEV(DeletableTag, {\n    name: tag,\n    onDelete: onTagDelete,\n    index: index,\n    hashtag: hashtag\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 7\n  }, this));\n  return /*#__PURE__*/_jsxDEV(\"ul\", {\n    name: \"tagsList\",\n    className: \"tagsList\",\n    children: list\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 7\n  }, this);\n};\n_c2 = TagsList;\nconst DeletableTag = _ref3 => {\n  let {\n    name,\n    index,\n    onDelete,\n    hashtag\n  } = _ref3;\n  return /*#__PURE__*/_jsxDEV(\"li\", {\n    children: [hashtag && /*#__PURE__*/_jsxDEV(\"span\", {\n      style: {\n        color: 'rgb(87, 7, 7)',\n        fontWeight: 'bold'\n      },\n      children: \"# \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 11\n    }, this), name, /*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"#\",\n      onClick: e => onDelete(index, e),\n      children: \"x\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 7\n  }, this);\n};\n_c3 = DeletableTag;\nexport default SearchBar;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"SearchBar\");\n$RefreshReg$(_c2, \"TagsList\");\n$RefreshReg$(_c3, \"DeletableTag\");","map":{"version":3,"names":["React","useStateValue","Helpers","SearchBar","tagList","inputValue","handleNewTag","tags","props","onNewTag","onTagChange","handleInputChange","target","value","setState","handleKeyDown","e","key","state","preventDefault","trim","notDuplicate","addTag","handleTagDelete","length","index","deleteTag","callback","slice","splice","newTag","includes","allowDuplicates","tag","updateControlledTags","hasDuplicates","componentWillReceiveProps","nextProps","hashtag","TagsList","onTagDelete","list","map","DeletableTag","name","onDelete","color","fontWeight"],"sources":["/Users/yaothao/Documents/Yellow Page Research/public-facing/prototype/src/SearchBar.js"],"sourcesContent":["import React from \"react\";\nimport { useStateValue } from './StateProvider';\nimport Helpers from \"./Helpers\";\n\n\nfunction SearchBar () {\n    const [{tagList}] = useStateValue();\n    const inputValue = '';\n    \n    const handleNewTag = (tags) => {\n      if (this.props.onNewTag) this.props.onNewTag(tags);\n      if (this.props.onTagChange) this.props.onTagChange(tags);\n    }\n  \n    const handleInputChange = ({target: { value: inputValue }}) => {\n      inputValue = inputValue === ',' ? '' : inputValue;\n      this.setState({inputValue});\n    }\n    \n    const handleKeyDown = (e) => {\n      let { key, target: {value} } = e;\n      let { tags } = this.state;\n      switch (key) {\n        case 'Tab':\n          if (value) e.preventDefault();\n        case 'Enter':\n        case ',':\n          value = value.trim();\n          if (value && notDuplicate(tags, value)) {\n            addTag(value);\n          } else {\n            this.setState({inputValue: ''})\n          }\n          break;\n        case 'Backspace':\n          if (!value) {\n            handleTagDelete(tags.length - 1);\n          }\n          break;\n      }\n    }\n    \n    const handleTagDelete = (index, e) => {\n      deleteTag(index, () => {\n        this.props.onTagChange(this.state.tags);\n      });\n    }\n    \n    const deleteTag = (index, callback) => {\n      let tags = this.state.tags.slice();\n      \n      tags.splice(index, 1);\n      this.setState({ tags }, () => {\n        if (callback) callback();\n      });\n    }\n    \n    const notDuplicate = (tags, newTag) => {\n      return (!tags.includes(newTag) || this.props.allowDuplicates);\n    }\n    \n    const addTag = (tag) => {\n      if (this.notDuplicate(this.state.tags, tag)) {\n        this.setState({tags: [...this.state.tags, tag], inputValue: ''}, () => {\n          handleNewTag(this.state.tags);\n        });\n      }\n    }\n    \n    const updateControlledTags = (tags) => {\n      if (tags && !Helpers.hasDuplicates(tags)) {\n        this.setState({ tags }, () => {\n          // this.props.onTagChange(tags);\n        });\n      }\n    }\n    \n    const componentWillReceiveProps = (nextProps) => {\n      updateControlledTags(nextProps.tags);\n    }\n    \n      return (\n        <span className=\"tagInputWrapper\">\n          <TagsList \n            tags={this.state.tags} \n            onTagDelete={this.handleTagDelete} \n            hashtag={this.props.hashtag}\n          />\n          <input \n            name=\"tagInput\" \n            className=\"tagInput\" \n            placeholder=\"enter a tag...\" \n            value={inputValue} \n            onChange={this.handleInputChange}\n            onKeyDown={this.handleKeyDown}\n          />\n        </span>\n      );\n}\n\nconst TagsList = ({tags, onTagDelete, hashtag}) => {\n    let list = tags.map((tag, index) => (\n      <DeletableTag \n        name={tag} \n        onDelete={onTagDelete} \n        index={index} \n        hashtag={hashtag} />\n    ));\n    return (\n      <ul name=\"tagsList\" className=\"tagsList\">\n        {list}\n      </ul>\n    )\n  }\n  \n  const DeletableTag = ({name, index, onDelete, hashtag}) => {\n    return (\n      <li>\n        {hashtag && (\n          <span style={{color: 'rgb(87, 7, 7)', fontWeight: 'bold'}}># </span>\n        )}\n        {name} \n        <a href=\"#\" onClick={e => onDelete(index, e)}>x</a>\n      </li>\n    );\n  }\n\nexport default SearchBar;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}